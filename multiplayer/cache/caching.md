Реализация кэширования
=========================
Scope: Multiplayer
-------------------------
### Данные игрового сервера ###
+ Данные игровых серверов не связаны между собой. В таком случае для каждого игрового сервера можно выделить свои сервера БД и кэширования.
+ Контент сцены игры пользователь скачивает заранее, еще до начала игры, на свое устройство, поэтому эти данные не грузяться во время игры и их кэшировать не нужно.

### Внутриигровые чаты ###
+ Специфика: **чаты** будут действовать только **в рамках своего игрового сервера**. **Число пользователей** на одном сервере **ограничено**, соответственно и в чатах.
+ Процесс, который в котором следует применить кэширование: **получение списка последних сообщений**:
  - Используется **Redis** для хранения списка объектов последних сообщений.
  - Когда пользователь открывает чат, поступает запрос на front. Тот пробует получить **список последних сообщений из Redis по ключу "ch<chat id>.lastMessages"**. В случае успеха процесс проходит очень быстро.
  - Если в кэше данных нет, то обращение происходит к **DB server**. В этом случае данные отдаются клиенту и сохраняются в Redis по вышеуказанному ключу.
+ Когда пользователь отправляет сообщение, оно сохраняется в бд, и тут же обновляются данные кэша, а именно, если по соответствующий ключ существует, то **новое сообщение добавляется в существующий в кэше список**. Иначе происходит сохранение всего списка последних сообщений.
+ В случае нехватки ресурсов Redis **удаляет из списков наиболее старые сообщения**, преимущественно в чатах с большим количеством закэшировавшихся сообщений.
